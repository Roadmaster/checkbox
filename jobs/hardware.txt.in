plugin: shell
name: fwts_test
requires:
  package.name == 'linux'
  package.name == 'fwts'
_description:
 Run Colin King's Firmware Test Suite automated tests.
command:
 fwts_test -l $CHECKBOX_DATA/fwts_results.log

plugin: attachment
name: fwts_log
depends: fwts_test
_description:
 Gather log from the firmware test suite run
command:
 cat $CHECKBOX_DATA/fwts_results.log

plugin: local
name: check_and_install_ipmitool
user: root
command: dpkg -l | grep -iq 'ipmitool' || apt-get install -y ipmitool >/dev/null 2>&1
_description: ipmitool is required for ipmi testing. This checks for ipmitool and installs it if not available.

plugin: shell
name: ipmi_test
depends: check_and_install_ipmitool
user: root
command: ipmi_test
_description:
 This will run some basic connectivity tests against a BMC, verifying that IPMI works.
