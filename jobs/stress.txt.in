plugin: shell
name: stress/cpu_stress_test
requires:
 package.name == 'linux'
 package.name == 'stress'
user: root
command: stress --cpu `cpuinfo_resource | awk '/count:/ {print $2}'` --vm `awk '/MemTotal/ {num_vm = $2/262144; if (num_vm != int(num_vm)) num_vm = int(num_vm) + 1; print num_vm}' /proc/meminfo` --timeout 7200
_description:
 PURPOSE:
     Create jobs that use the CPU as much as possible for two hours. The test is considered passed if the system does not freeze.

plugin: shell
name: power-management/hibernate_30_cycles
depends: power-management/rtc
requires: package.name == 'pm-utils'
user: root
command: sleep_test -i 30 -s disk -w 120 --debug
_description:
 PURPOSE:
    This is an automated stress test that will force the system to hibernate/resume for 30 cycles

plugin: shell
name: power-management/suspend_30_cycles
depends: power-management/rtc
requires: package.name == 'pm-utils'
user: root
command: sleep_test -i 30 -s mem --debug
_description:
 PURPOSE:
    This is an automated stress test that will force the system to suspend/resume for 30 cycles.
