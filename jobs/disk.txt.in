plugin: manual
name: disk_test
command: udev_resource | filter_templates -w "category=DISK" | awk -F': ' '$1 == "product" { print $2 }'
_description:
 The following hard drives were detected:
 .
 $output
 .
 Is this correct?

plugin: local 
name: disk_bench
requires: device.category == 'DISK'
_description: Benchmark for each disk 
command: 
 cat <<'EOF' | run_templates -t -s 'udev_resource | filter_templates -w "category=DISK"'
 plugin: manual
 name: disk_bench_test_`ls /sys$path/block`
 requires: device.path == "$path" and package.name == 'linux'
 user: root
 command: hdparm -tT /dev/`ls /sys$path/block` | sed 's/:.*= */ = /' | grep -v "^$"
 description:
  Disk Benchmark:
  .
  \$output
  .
  Is this ok?
 EOF

plugin: local
name: disk_smart
requires:
 package.name == 'smartmontools'
 package.name == 'linux'
 device.category == 'DISK'
_description: SMART test
command:
 cat <<'EOF' | run_templates -t -s 'udev_resource | filter_templates -w "category=DISK"'
 plugin: shell
 name: disk_smart_`ls /sys$path/block`
 requires: device.path == "$path"
 description: SMART test for $product
 user: root
 command: disk_smart -b /dev/`ls /sys$path/block` -s 130
 EOF

plugin: local
name: max_diskspace_used_test
requires:
 device.category == 'DISK'
_description: Maximum disk space used during a default installation test
command:
 cat <<'EOF' | run_templates -t -s 'udev_resource | filter_templates -w "category=DISK"'
 plugin: shell
 name: max_diskspace_used_`ls /sys$path/block`
 requires: device.path == "$path"
 description: Max disk space test for $product
 user: root
 command: max_diskspace_used `ls /sys$path/block`
 EOF

plugin: local
name: disk_read_performance_test
requires:
 device.category == 'DISK'
_description: Verify system storage performs at or above baseline performance
command:
 cat <<'EOF' | run_templates -t -s 'udev_resource | filter_templates -w "category=DISK"'
 plugin: shell
 name: disk_read_performance_test_`ls /sys$path/block`
 requires:
  device.path == "$path"
  package.name == 'linux'
 description: Disk performance for $product
 user: root
 command: disk_read_performance_test `ls /sys$path/block`
 EOF

plugin: local
name: storage_devices_test
requires:
 device.category == 'DISK'
_description: Verify that storage devices, such as Fibre Channel and RAID can be detected and perform under stress.
command:
 cat <<'EOF' | run_templates -t -s 'udev_resource | filter_templates -w "category=DISK"'
 plugin: shell
 name: storage_devices_test_`ls /sys$path/block`
 user: root
 requires:
  device.path == "$path"
  package.name == 'linux'
 description: I/O stress test for $product
 command: storage_test `ls /sys$path/block`
 EOF
