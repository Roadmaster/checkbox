plugin: shell
name: optical/detect
requires: device.category == 'CDROM' 
command:
 cat <<'EOF' | run_templates -t -s 'udev_resource | filter_templates -w "category=CDROM"' | sed '/^$/d'
 $vendor $product
 EOF
_description: Test to detect the optical drives

plugin: local
name: optical/read
requires: device.category == 'CDROM'
_description: Optical Storage device read tests
command:
 cat <<'EOF' | run_templates -t -s 'udev_resource | filter_templates -w "category=CDROM"'
 plugin: manual
 name: optical/read_`ls /sys$path/block`
 requires: device.path == "$path" and package.name == 'linux'
 depends: optical/detect
 user: root
 command: optical_read_test /dev/`ls /sys$path/block`
 _description:
  PURPOSE:
      This test will check your optical devices
  STEPS:
      1. Insert appropriate non-blank media into your optical drive(s)
      2. Click "Test" to automatically test reading
  VERIFICATION:
      Did it read correctly?
 EOF

plugin: manual
name: optical/cdrom-write
depends: optical/detect
requires: device.category == 'CDROM'
_description:
 PURPOSE:
     This test will check your system's CDROM writing capabilities. If your drive does not support writing to CD media, please skip this test.
 STEPS:
     1. Enter a blank CDROM into your drive
     2. Write something in the CDROM
     3. Read the newly written CDROM
 VERIFICATION:
     Was the data correctly written?

plugin: manual
name: optical/cdrom-audio-playback
depends: optical/read
_description:
 PURPOSE:
     This test will check your CD audio playback capabilities
 STEPS:
     1. Insert an audio CD in your optical drive
     2. Open the Dash (click on the Ubuntu Circle of Friends button on the Launcher)
     3. Click "Listen to Music" to open Banshee
     4. Select the CD under "Libraries" in the left panel of Banshee
     5. Click the Play button to listen to music
     6. Stop playing after some time
     7. Right click on the CD icon under "Libraries" and select "Eject Disc"
     8. The CD should be ejected
     9. Close Banshee
 VERIFICATION:
     Did all the steps work?

plugin: manual
name: optical/dvd-write
depends: optical/detect
requires: device.category == 'CDROM'
_description:
 PURPOSE:
     This test will check your system's DVD writing capabilities. If your drive does not support writing to DVD media, please skip this test.
 STEPS:
     1. Enter a blank DVD into your drive
     2. Write something in the DVD
     3. Read the newly written DVD
 VERIFICATION:
     Was the data correctly written?

plugin: manual
name: optical/dvd_movie_playback
depends: optical/read
_description:
 PURPOSE:
     This test will check your DVD movie playback capabilities. Note that installation of non-free software (codecs, player, etc) may be required prior to performing this test.
 STEPS:
     1. Insert a DVD that contains any movie in your optical drive
     2. Open the Dash (click on the Ubuntu Circle of Friends button on the Launcher)
     3. Click "Media Apps" and then click on "Movie Player"
     4. Play the movie using Movie Player, stop the movie after verifying that it plays
     6. Eject the DVD
 VERIFICATION:
     Did all the steps work?

plugin: manual
name: optical/dvd_playback
command: totem /media/cdrom
requires:
 device.category == 'CDROM'
 package.name == 'totem'
_description:
 PURPOSE:
     This test will check your DVD  playback capabilities
 STEPS:
     1. Insert a DVD that contains any movie in your optical drive
     2. Click "Test" to play the DVD in Totem
 VERIFICATION:
     Did the file play?
