plugin: manual
name: miscellanea/chvt
requires:
 package.alias == 'linux'
 package.name == 'kbd'
user: root
command: cycle_vts
_description:
 PURPOSE:
     This test will check that the system can switch to a virtual terminal and back to X
 STEPS:
     1. Click "Test" to switch to another virtual terminal and then back to X
 VERIFICATION:
     Did your screen change temporarily to a text console and then switch back to your current session?

plugin: shell
name: miscellanea/fwts_test
requires:
  package.name == 'linux'
  package.name == 'fwts'
_description:
 Run Firmware Test Suite (fwts) automated tests.
command:
 fwts_test -l $CHECKBOX_DATA/fwts_results.log

plugin: local
name: miscellanea/check_and_install_ipmitool
user: root
command: dpkg -l | grep -iq 'ipmitool' || apt-get install -y ipmitool >/dev/null 2>&1
_description: ipmitool is required for ipmi testing. This checks for ipmitool and installs it if not available.

plugin: shell
name: miscellanea/ipmi_test
depends: miscellanea/check_and_install_ipmitool
user: root
command: ipmi_test
_description:
 This will run some basic connectivity tests against a BMC, verifying that IPMI works.

plugin: manual
name: miscellanea/is_laptop
_description:
 PURPOSE:
    This is to determine if we need to run tests specific to portable computers that may not apply to desktops.
 STEPS:
    Select "Yes" if your system is a laptop or netbook. Otherwise, select "No"

plugin: shell
name: miscellanea/apport-directory
requires: package.name == 'apport'
command: ! test -d /var/crash || test $(find /var/crash -type f | wc -l) -eq 0
_description: 
 This test checks /var/crash to see if there are any crash reports present.
 .
 If there are, this test will fail.
