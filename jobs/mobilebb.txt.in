plugin: shell
name: mobilebb/gsm_connection
requires:
    package.name == 'network-manager'
    package.name == 'modem-manager'
    mobilebb.gsm == 'supported'
user: root
environ: CONN_NAME APN USERNAME PASSWORD
command: trap "nmcli con delete id $CONN_NAME" EXIT; create_connection mobilebb $APN `if [ ${CONN_NAME+x} ]; then echo "--name=$CONN_NAME"; fi` `if [ ${USERNAME+x} ]; then echo "--username=$USERNAME"; fi` `if [ ${PASSWORD+x} ]; then echo "--password=$PASSWORD"; fi` && curl http://start.ubuntu.com/connectivity-check.html --interface `nmcli dev status | awk '/gsm/ {print $1}'`

plugin: shell
name: mobilebb/cdma_connection
requires:
    package.name == 'network-manager'
    package.name == 'modem-manager'
    mobilebb.cdma == 'supported'
user: root
environ: CONN_NAME APN USERNAME PASSWORD
command: trap "nmcli con delete id $CONN_NAME" EXIT; create_connection mobilebb $APN `if [ ${CONN_NAME+x} ]; then echo "--name=$CONN_NAME"; fi` `if [ ${USERNAME+x} ]; then echo "--username=$USERNAME"; fi` `if [ ${PASSWORD+x} ]; then echo "--password=$PASSWORD"; fi` && curl http://start.ubuntu.com/connectivity-check.html --interface `nmcli dev status | awk '/gsm/ {print $1}'`
