plugin: shell
name: usb/detect
requires: package.name == 'linux'
command: lsusb | sed 's/.*\(ID .*\)/\1/' | head -n 4 || echo "No USB devices were detected" >&2
_description: Detects and shows USB devices attached to this system.

plugin: manual
name: usb/disk_detect
depends: usb/detect
requires:
 package.name == 'linux'
 package.name == 'udisks'
command: removable_storage_test -l usb
_description:
 PURPOSE:
     This test will check that your system detects USB storage devices.
 STEPS:
     1. Plug in one or more USB keys or hard drives.
     2. Click on "Test".
 INFO:
     $output
 VERIFICATION:
     Were the drives detected?

plugin: manual
name: usb/keyboard
depends: usb/detect
requires: package.name == 'linux'
command: keyboard_test
_description:
 PURPOSE:
     This test will check your USB connection.
 STEPS:
     1. Plug a USB keyboard into the computer.
     2. Click on "Test" and enter some text.
 VERIFICATION:
     Does the keyboard work?

plugin: manual
name: usb/mouse
depends: usb/detect
requires: package.name == 'linux'
_description:
 PURPOSE:
     This test will check your USB connection.
 STEPS:
     1. Plug a USB mouse into the computer.
     2. Perform some single/double/right click operations.
 VERIFICATION:
     Does the mouse work correctly?

plugin: manual
name: usb/insert
depends: usb/detect
requires:
 package.name == 'linux'
 package.name == 'udisks'
command: removable_storage_watcher insert usb
_description:
 PURPOSE:
     This test will check that the system correctly detects the insertion of
     a USB storage device
 STEPS:
     1. Click "Test" and insert a USB storage device (pen-drive/HDD).
        (Note: this test will time-out after 20 seconds.)
     2. Do not unplug the device after the test.
 VERIFICATION:
     The verification of this test is automated. Do not change the
     automatically selected result.

plugin: manual
name: usb/remove
depends: usb/storage-automated
requires:
 package.name == 'linux'
 package.name == 'udisks'
command: removable_storage_watcher remove usb
_description:
 PURPOSE:
     This test will check that the system correctly detects the removal of
     a USB storage device
 STEPS:
     1. Click "Test" and remove the USB device.
        (Note: this test will time-out after 20 seconds.)
 VERIFICATION:
     The verification of this test is automated. Do not change the
     automatically selected result.

plugin: manual
name: usb/storage-transfer
requires:
 package.name == 'linux'
 package.name == 'udisks'
depends: usb/insert
command: removable_storage_test usb
_description:
 PURPOSE:
     This test will check your USB connection.
 STEPS:
     1. Plug a USB HDD or thumbdrive into the computer.
     2. An icon should appear on the Launcher.
     3. Click "Test" to begin the test.
 VERIFICATION:
     The verification of this test is automated. Do not change the
     automatically selected result.

plugin: shell
name: usb/storage-automated
requires:
 package.name == 'linux'
 package.name == 'udisks'
depends: usb/insert
command: removable_storage_test usb
_description:
 This test is automated and executes after the usb/insert test is run.

plugin: shell
name: usb/storage-preinserted
user: root
requires:
 package.name == 'linux'
 package.name == 'udisks'
command: removable_storage_test -l usb && removable_storage_test usb
_description:
 This is an automated version of usb/storage-automated and assumes that the
 server has usb storage devices plugged in prior to checkbox execution. It
 is intended for servers and SRU automated testing.

plugin: manual
name: usb/panels
requires: package.name == 'linux'
_description:
 PURPOSE:
     This test will check your USB connection.
 STEPS:
     1. Connect a USB storage device to an external USB slot on this computer.
     2. An icon should appear on the Launcher.
     3. Confirm that the icon appears.
     4. Eject the device.
     5. Repeat with each external USB slot.
 VERIFICATION:
     Do all USB slots work with the device?
